{% include 'top.html.twig' %}

<div class = "container">
<div class = "row">
  <div class = "col m12">
    <img src="{{ profile.getPicture }}" height="100" width="100">

    <p>Welcome {{ profile.getFirstName }} {{ profile.getLastName }}</p>
    <p>Member since {{ profile.getDate }}</p>
    <p>About {{ profile.getFirstName }}: {{ profile.getBio }}</p>
    <a href="/profile/{{ user_id }}">Edit  Profile</a>
  </div>
</div>
  <div class = "row">
    <div class = "col m6">
      <h5>My Groups</h5>
        <ul class="collapsible" data-collapsible="accordion">
          {% for group in groups %}
            {% set tasks = group.getTaskFromGroup %}
          <li>
            <div class="collapsible-header"><span class="new badge cyan " data-badge-caption="tasks">
            {{tasks|length}}</span><i class="material-icons"></i><a href="/groupinfo/{{ group.getId }}/{{ user_id }}">{{ group.getGroupName }}</a></div>
            <div class="collapsible-body">
              {% for task in tasks %}
              <p>{{task.getName}}- Due: {{task.getDueTime}}</p></br>
              {% endfor %}
            </div>
          </li>
          {% endfor %}
        </ul>
    </div>
    <div class = "col m6">
      <h5>My Tasks</h5>
      Place tasks here
    </div>
  </div>
  <div class = "row">
    {% if group_requests is not empty %}
      {% for group_request in group_requests %}
        <form action="/groupaccept" method="post">
          <input type="hidden" name="group_id" value="{{ group_request.group_id }}">
          <input type="hidden" name="sender_id" value="{{ group_request.sender_id }}">
          <input type="hidden" name="user_id" value="{{ group_request.user_id }}">
          <p>You are invited to group: {{ group_request.group_name }}</p>
          <button type="submit">Accept</button>
        </form>
        <form action="/grouprefuse" method="post">
          <input type="hidden" name="group_id" value="{{ group_request.group_id }}">
          <input type="hidden" name="sender_id" value="{{ group_request.sender_id }}">
          <input type="hidden" name="user_id" value="{{ group_request.user_id }}">
          <button type="submit">Refuse</button>
        </form>
      {% endfor %}
    {% endif %}
    </div>
    {% if user_request is not empty %}
    {% for user_requests in user_request %}
    {% set user = user_requests.findUserbyProfileIdNotStatic(user_requests.getId)%}
      <form action="/friendaccept" method="post">
        <input type="hidden" name="receiver_id" value="{{ user_id }}">
        <input type="hidden" name="sender_id" value="{{ user.id }}">
        <p><img src="{{ user_requests.getPicture }}" height="35" width="35"> {{ user_requests.getFirstName }} {{ user_requests.getLastName }} would like to add you as an associate</p>
        <button type="submit">Accept</button>
      </form>
      <form action="/friendrefuse" method="post">
        <input type="hidden" name="receiver_id" value="{{ user_requests.id }}">
        <input type="hidden" name="sender_id" value="{{ user_requests.id }}">
        <button type="submit">Refuse</button>
      </form>
    {% endfor %}
    {% endif %}


  <img src="{{ profile.getPicture }}" height="100" width="100">

  <p>Welcome {{ profile.getFirstName }} {{ profile.getLastName }}</p>
  <p>Memeber since {{ profile.getDate }}</p>
  <p>About {{ profile.getFirstName }}: {{ profile.getBio }}</p>



  {% include 'creategroup.html.twig' %}


  {% if friends is not empty %}
<h3> My associates </h3>
{% for friend in friends %}
<p> {{ friend.getFirstName}} {{ friend.getLastName }} <img src="{{ friend.getPicture }}" height="35" width="35"></p>
{% endfor %}
  {% else %}
  <h4> You do not have any associates yet </h4>
  {% endif %}

</div>
{% include 'sidenav.html.twig' %}

{% include 'bottom.html.twig' %}
